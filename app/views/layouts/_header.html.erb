<header class="border-bottom border-dark">

  <nav class="navbar navbar-expand-lg navbar-light">
    <div class="container">

      <div class="col-5" style="right:100px;">
      <a class="navbar-brand" href="/" %><%= image_tag 'logo.jpg', size: "280x70" %></a>
      </div>
      <div class="col-4" style="right:100px;">

      <% if customer_signed_in? %>
        <div class="d-flex align-items-center">
          ようこそ、<%= current_customer.last_name + current_customer.first_name %>さん!
        </div>
      <% end %>
      </div>

      <div class="col-4 mt-1">
        <div class="row">
          <div class="col-12">
            <div class="d-flex justify-content-end">
              <% if admin_signed_in? %>
                <%= render 'layouts/admin_header' %>
              <% elsif customer_signed_in? %>
                <li class="d-flex mr-4">
                  <%= link_to public_customers_information_path, class: "btn btn-outline-secondary" do %>
                    マイページ
                  <% end %>
                </li>
                <li class="d-flex mr-4">
                  <%= link_to  public_items_path, class: "btn btn-outline-secondary" do %>
                    商品一覧
                  <% end %>
                </li>
                <li class="d-flex mr-4">
                  <%= link_to public_cart_items_path, class: "btn btn-outline-secondary" do %>
                    カート
                    <% if current_customer.cart_items.map(&:amount).any?%>
                    <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger text-white", style="position:relative; transform: translateY(-25%);">
                    <%= current_customer.cart_items.map(&:amount).sum %>
                   </span>
                   <% end %>
                  <% end %>
                </li>
                <li class="d-flex">
                  <%= link_to destroy_customer_session_path, method: :delete, class: "btn btn-outline-secondary" do %>
                    ログアウト
                  <% end %>
                </li>
              <% else %>
                <li class="d-flex mr-4">
                  <%= link_to about_path, class: "btn btn-outline-secondary" do %>
                    About
                  <% end %>
                </li>
                <li class="d-flex mr-4">
                  <%= link_to public_items_path, class: "btn btn-outline-secondary" do %>
                    商品一覧
                  <% end %>
                </li>
                <li class="d-flex mr-4">
                  <%= link_to new_customer_registration_path,class: "btn btn-outline-secondary" do %>
                    新規登録
                  <% end %>
                </li>
                <li class="d-flex">
                  <%= link_to new_customer_session_path ,class: "btn btn-outline-secondary" do %>
                    ログイン
                  <% end %>
                </li>
              <% end %>
            </div>
          </div>
          <div class="col-12">
            <div class="mt-3 text-right">
              <%= form_with url: public_search_path, method: :get, local: true do |f| %>
                <%= f.text_field :query, placeholder: "Search" %>
                <%= f.submit "検索" %>
              <% end %>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</header>
