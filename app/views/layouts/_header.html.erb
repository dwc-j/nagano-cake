<header class="border-bottom border-dark">
  <nav class="navbar navbar-expand-lg navbar-light">
    <div class="container">
      <a class="navbar-brand" href="/" %>ここにロゴ</a>
      <% if customer_signed_in? %>
        <div class="d-flex align-items-center">
          ようこそ、<%= current_customer.last_name %>さん!
        </div>
      <% end %>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown"
                    aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNavDropdown">
        <ul class="navbar-nav ml-auto">
          <% if admin_signed_in? %>
            <%= render 'layouts/admin_header' %>
          <% elsif customer_signed_in? %>
            <li class="nav-item">
              <%= link_to public_customers_information_path, class: "nav-link text-dark mr-3 btn btn-outline-secondary" do %>
                マイページ
              <% end %>
            </li>
            <li class="nav-item">
              <%= link_to  public_items_path, class: "nav-link text-dark mr-3 btn btn-outline-secondary" do %>
                商品一覧
              <% end %>
            </li>
            <li class="nav-item">
              <%= link_to public_cart_items_path, class: "nav-link text-dark mr-3 btn btn-outline-secondary" do %>
                カート
                <% if current_customer.cart_items.map(&:amount).any?%>
                  <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger text-white", style="position:relative; transform: translateY(-25%);">
                    <%= current_customer.cart_items.map(&:amount).sum %>
                  </span>
                <% end %>
              <% end %>
            </li>
            <li class="nav-item">
              <%= link_to destroy_customer_session_path, method: :delete, class: "nav-link text-dark btn btn-outline-secondary" do %>
                ログアウト
              <% end %>
            </li>
          <% else %>
            <li class="nav-item">
              <%= link_to about_path, class: "nav-link text-dark mr-3 btn btn-outline-secondary" do %>
                About
              <% end %>
            </li>
            <li class="nav-item">
              <%= link_to public_items_path, class: "nav-link text-dark mr-3 btn btn-outline-secondary" do %>
                商品一覧
              <% end %>
            </li>
            <li class="nav-item">
              <%= link_to new_customer_registration_path,class: "nav-link text-dark mr-3 btn btn-outline-secondary" do %>
                新規登録
              <% end %>
            </li>
            <li class="nav-item">
              <%= link_to new_customer_session_path ,class: "nav-link text-dark btn btn-outline-secondary" do %>
                ログイン
              <% end %>
            </li>
          <% end %>
        </ul>
      </div>
    </div>
  </nav>
</header>